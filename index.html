<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@vyapti/parser</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@vyapti/parser</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @vyapti/parser</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="parser-js">parser-js</h1>
				<p>Parse LCOV formatted coverage data from a variety of inputs: Strings, Files,
				Node Streams and Browser Streams through one consistent API.</p>
				<h2 id="usage">Usage</h2>
				<p>For Node Environments, the package can be <code>require</code>d and used:</p>
				<pre><code class="language-js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { StreamParser, ReportMode } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@vyapti/parser'</span>);

<span class="hljs-keyword">const</span> stream = fs.createReadStream(<span class="hljs-string">'/path/to/lcov/file'</span>);
<span class="hljs-keyword">const</span> streamParser = <span class="hljs-keyword">new</span> StreamParser();
streamParser.parse(, {
  <span class="hljs-attr">rootDirectory</span>: <span class="hljs-string">'/base/path/to/project'</span>,
  <span class="hljs-attr">encoding</span>: <span class="hljs-string">'ascii'</span>,
  <span class="hljs-attr">mode</span>: ReportMode.Detail,
}).then(<span class="hljs-function"><span class="hljs-params">report</span> =&gt;</span> {
  <span class="hljs-comment">// Use the parsed report...</span>
});</code></pre>
				<p>For Browser Environments, the package is exposed as <code>VyaptiParser</code> on the
				<code>window</code> object.</p>
				<pre><code class="language-js"><span class="hljs-keyword">const</span> { StreamParser, ReportMode } = <span class="hljs-built_in">window</span>.VyaptiParser;

<span class="hljs-keyword">const</span> streamParser = <span class="hljs-keyword">new</span> StreamParser();
fetch(urlToLcovFile)
  .then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.body)
  .then(<span class="hljs-function"><span class="hljs-params">stream</span> =&gt;</span> streamParser.parse(stream, {
      <span class="hljs-attr">rootDirectory</span>: <span class="hljs-string">'vyapti/parser'</span>,
      <span class="hljs-attr">encoding</span>: <span class="hljs-string">'utf-8'</span>,
      <span class="hljs-attr">mode</span>: ReportMode.Detail,
    }))
  .then(<span class="hljs-function"><span class="hljs-params">report</span> =&gt;</span> {
    <span class="hljs-comment">// Use the parsed report...</span>
  });</code></pre>
				<h3 id="api">API</h3>
				<p>The following parsers are exposed for use:</p>
				<ul>
					<li><code>ContentParser</code> - parses lcov content from a string (new lines are still
					required)</li>
					<li><code>FileParser</code> (Node only) - parses lcov content from a file</li>
					<li><code>StreamParser</code> - parses lcov content from a stream<ul>
							<li>In Browsers, this is a <code>ReadableStream</code> from  the <code>Streams API</code></li>
							<li>In Node, this is a <code>Readable</code> stream from the <code>streams</code> module</li>
						</ul>
					</li>
				</ul>
				<p>Additionally, the <code>ReportMode</code> enum is exposed to determine the correct
				<code>Report</code> to create (See <code>Reports</code> section).</p>
				<p>Each parser can be constructed directly and provides two methods to handle
				parsing:</p>
				<ul>
					<li><p><code>parse(input, options)</code> - Parses <code>input</code> and returns a <code>Promise</code> of a
						<code>Report</code> (See <code>Reports</code> section).</p>
						<ul>
							<li><code>input</code> - the input source to parse. This determined by the type of parser:<ul>
									<li><code>ContentParser</code> - a <code>string</code> containing the lcov formatted data</li>
									<li><code>FileParser</code> - a <code>string</code> containing the path to a file with lcov
									formatted data</li>
									<li><code>StreamParser</code> - a <code>stream</code> (depending on the environment) that contains
									the lcov formatted data</li>
								</ul>
							</li>
							<li><code>options</code> - an object that provides several configuration options:<ul>
									<li><code>encoding</code> - The encoding format used by the input. Defaults to <code>utf-8</code></li>
									<li><code>mode</code> - a <code>ReportMode</code> that specifies the type of <code>Report</code> that should
									be generated. Defaults to <code>ReportMode.Simple</code></li>
									<li><code>rootDirectory</code> a string containing the &quot;starting&quot; point of files tracked
										in the lcov data. File paths are relativized based on this string. Ex:
										passing <code>/root/projectA/src</code> as the root directory means that a file with
										path: <code>/root/projectA/src/moduleB/sourceC</code> becomes <code>moduleB/sourceC</code>.
									Defaults to <code>&#39;&#39;</code>.</li>
								</ul>
							</li>
						</ul>
					</li>
					<li><p><code>parseSync(input, options)</code> - Parses <code>input</code> and returns a <code>Report</code> (See
						<code>Reports</code> section).</p>
						<ul>
							<li>The same function as <code>parse</code>, but runs in synchronously. See <code>parse</code> for
								details on the parameters.<blockquote>
									<p>NOTE: <code>parseSync</code> is not available for <code>StreamParser</code>s.</p>
								</blockquote>
							</li>
						</ul>
					</li>
				</ul>
				<h3 id="reports">Reports</h3>
				<blockquote>
					<p>Full documentation will be added soon, docs can be built locally using the
					<code>docs</code> package script.</p>
				</blockquote>
				<p><code>Report</code>s contain parsed data in a structure that allows easy access. There are
					several types of reports that can be generated based on the <code>ReportMode</code> passed
				to the <code>parse</code> methods:</p>
				<ul>
					<li><code>Report</code> - A basic report that contains a total coverage summary, a list of
						files tracked in the coverage data, and a map of coverage summaries keyed by
					filename. Use <code>ReportMode.Simple</code> to generate this report.</li>
					<li><code>FlatReport</code> - A detailed report that contains a total coverage summary, a
						list of files tracked in the coverage data, and a map of detailed coverage
					summaries keyed by filename. Use <code>ReportMode.Detail</code> to generate this report.</li>
					<li><code>TreeReport</code> - A detailed report that contains a total coverage summary, a
						list of files tracked in the coverage data, and a tree structure (matching
						the file structure heirarchy of tracked files). Nodes in the tree structure
						(which represent directories) contain a coverage summary, a list of files
						that are descendants, and a map of nodes or leaves keyed by file name (or
						directory name). Leaves in the tree structure (which represent single files)
						are a detailed coverage summary. Use <code>ReportMore.Tree</code> to generate this
					report.</li>
				</ul>
				<p>Each report contains the following properties:</p>
				<ul>
					<li><code>total</code> - the total coverage <code>Summary</code> (docs TBD) that includes
					hits/totals/misses for lines/functions/branches in all tracked files</li>
					<li><code>paths</code> - a list of files that are tracked within the report</li>
					<li><code>details</code> - a map of <code>Summary</code>s (or <code>Summary</code> subclasses) that is keyed by
						the filename associated with the <code>Summary</code><ul>
							<li><code>FlatReport</code>s contain a map of <code>DetailedSummary</code>s (docs TBD) instead of
							<code>Summary</code>s</li>
							<li><code>TreeReport</code>s contain a map of <code>DetailedSummary</code>s or <code>TreeReportNode</code>s
								keyed by the relative filename or relative directory, respectively
							(docs TBD)</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/reportmode.html" class="tsd-kind-icon">Report<wbr>Mode</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/branchdetail.html" class="tsd-kind-icon">Branch<wbr>Detail</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/browserstreamparser.html" class="tsd-kind-icon">Browser<wbr>Stream<wbr>Parser</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/contentparser.html" class="tsd-kind-icon">Content<wbr>Parser</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/detail.html" class="tsd-kind-icon">Detail</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/detailedrecord.html" class="tsd-kind-icon">Detailed<wbr>Record</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/detailedsummary.html" class="tsd-kind-icon">Detailed<wbr>Summary</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/detailedsummarybuilder.html" class="tsd-kind-icon">Detailed<wbr>Summary<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/fileparser.html" class="tsd-kind-icon">File<wbr>Parser</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/flatreport.html" class="tsd-kind-icon">Flat<wbr>Report</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/flatreportbuilder.html" class="tsd-kind-icon">Flat<wbr>Report<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/functiondetail.html" class="tsd-kind-icon">Function<wbr>Detail</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/linetransformer.html" class="tsd-kind-icon">Line<wbr>Transformer</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/nodestreamparser.html" class="tsd-kind-icon">Node<wbr>Stream<wbr>Parser</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/parser.html" class="tsd-kind-icon">Parser</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/record.html" class="tsd-kind-icon">Record</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/report.html" class="tsd-kind-icon">Report</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/reportbuilder.html" class="tsd-kind-icon">Report<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/streamparser.html" class="tsd-kind-icon">Stream<wbr>Parser</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/summary.html" class="tsd-kind-icon">Summary</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/summarybuilder.html" class="tsd-kind-icon">Summary<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/treereport.html" class="tsd-kind-icon">Tree<wbr>Report</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/treereportbuilder.html" class="tsd-kind-icon">Tree<wbr>Report<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/treereportnode.html" class="tsd-kind-icon">Tree<wbr>Report<wbr>Node</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/treereportnodebuilder.html" class="tsd-kind-icon">Tree<wbr>Report<wbr>Node<wbr>Builder</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter tsd-is-not-exported">
						<a href="interfaces/icloneable.html" class="tsd-kind-icon">ICloneable</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter tsd-is-not-exported">
						<a href="interfaces/icombinable.html" class="tsd-kind-icon">ICombinable</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#nodeorleaf" class="tsd-kind-icon">Node<wbr>OrLeaf</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#compareroots" class="tsd-kind-icon">compare<wbr>Roots</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#isleaf" class="tsd-kind-icon">is<wbr>Leaf</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#isroot" class="tsd-kind-icon">is<wbr>Root</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#normalize" class="tsd-kind-icon">normalize</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#normalizeroot" class="tsd-kind-icon">normalize<wbr>Root</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#relative" class="tsd-kind-icon">relative</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>