<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width"
    />
    <script src="https://unpkg.com/@vyapti/parser@latest/dist/web/index.min.js"></script>
    <script src="./displayReport.js"></script>
    <title>Vyapti Parser Web Content Example</title>
  </head>
  <body>
    <div>
      Check the console for output!
    </div>
    <script>
      const { ContentParser, ReportMode } = window.VyaptiParser;
      const options = {
        rootDirectory: 'vyapti/parser',
        mode: ReportMode.Detail,
      };
      const cp = new ContentParser();
      fetch('./lcov.info')
        .then(res => res.text())
        .then(content => {
          // Synchronous Example
          // const report = cp.parseSync(content, options);
          // window.displayReportData(report);

          // Asynchronous Example
          cp.parse(content, options).then(window.displayReportData);
        });
    </script>
  </body>
</html>
