<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width"
    />
    <script src="https://unpkg.com/@vyapti/parser@latest/dist/web/index.min.js"></script>
    <script src="./displayReport.js"></script>
    <title>Vyapti Parser Web Stream Example</title>
  </head>
  <body>
    <div>
      Check the console for output!
    </div>
    <script>
      const { StreamParser, ReportMode } = window.VyaptiParser;
      const options = {
        rootDirectory: 'vyapti/parser',
        encoding: 'utf-8',
        mode: ReportMode.Detail,
      };
      const sp = new StreamParser();
      fetch('./lcov.info')
        .then(res => res.body)
        .then(stream => {
          // Asynchronous Example (Synchronous not supported for streams)
          sp.parse(stream, options).then(window.displayReportData);
        });
    </script>
  </body>
</html>
